#!/bin/bash

if [[ $# -ne 1 ]] ; then 
	echo "usage: $0 <nodeID>"
	exit 1
fi

##mvn exec:exec -D"exec.executable"="java -Xmn40g -Xmx40g -DnodeID=1 kawkab.fs.cli.CLI"
#mvn exec:exec -DnodeID=$1 -DXmn=12g -DXmx=14g -DMaxDirectMemorySize=8292m -DmainClass=kawkab.fs.cli.CLI
#--add-opens=java.base/jdk.internal.ref=ALL-UNNAMED

#gc="-XX:+UseConcMarkSweepGC"
gc="-XX:+UseZGC"

gr="-javaagent:/hdd1/sm3rizvi/glowroot/glowroot.jar"

#mem="18484m"
mem="26576m"

java  -ea -Xms6g -Xmx20g -XX:MaxDirectMemorySize=${mem} -XX:+UnlockExperimentalVMOptions ${gc} -DnodeID=$1 -classpath /home/sm3rizvi/kawkab/src/main/resources:/home/sm3rizvi/kawkab/target/classes:/hdd1/sm3rizvi/maven-repos/com/google/guava/guava/28.1-jre/guava-28.1-jre.jar:/hdd1/sm3rizvi/maven-repos/com/google/guava/failureaccess/1.0.1/failureaccess-1.0.1.jar:/hdd1/sm3rizvi/maven-repos/com/google/guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/hdd1/sm3rizvi/maven-repos/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/hdd1/sm3rizvi/maven-repos/org/checkerframework/checker-qual/2.8.1/checker-qual-2.8.1.jar:/hdd1/sm3rizvi/maven-repos/com/google/errorprone/error_prone_annotations/2.3.2/error_prone_annotations-2.3.2.jar:/hdd1/sm3rizvi/maven-repos/com/google/j2objc/j2objc-annotations/1.3/j2objc-annotations-1.3.jar:/hdd1/sm3rizvi/maven-repos/org/codehaus/mojo/animal-sniffer-annotations/1.17/animal-sniffer-annotations-1.17.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-core/2.17.31/chronicle-core-2.17.31.jar:/hdd1/sm3rizvi/maven-repos/com/intellij/annotations/12.0/annotations-12.0.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-bytes/2.17.42/chronicle-bytes-2.17.42.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-wire/2.17.59/chronicle-wire-2.17.59.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/compiler/2.3.4/compiler-2.3.4.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-threads/2.17.18/chronicle-threads-2.17.18.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/affinity/3.1.11/affinity-3.1.11.jar:/hdd1/sm3rizvi/maven-repos/commons-cli/commons-cli/1.4/commons-cli-1.4.jar:/hdd1/sm3rizvi/maven-repos/org/slf4j/slf4j-api/1.7.25/slf4j-api-1.7.25.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-map/3.17.8/chronicle-map-3.17.8.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-values/2.17.2/chronicle-values-2.17.2.jar:/hdd1/sm3rizvi/maven-repos/com/squareup/javapoet/1.5.1/javapoet-1.5.1.jar:/hdd1/sm3rizvi/maven-repos/net/openhft/chronicle-algorithms/2.17.0/chronicle-algorithms-2.17.0.jar:/hdd1/sm3rizvi/maven-repos/net/java/dev/jna/jna/4.2.1/jna-4.2.1.jar:/hdd1/sm3rizvi/maven-repos/net/java/dev/jna/jna-platform/4.2.1/jna-platform-4.2.1.jar:/hdd1/sm3rizvi/maven-repos/com/thoughtworks/xstream/xstream/1.4.9/xstream-1.4.9.jar:/hdd1/sm3rizvi/maven-repos/xmlpull/xmlpull/1.1.3.1/xmlpull-1.1.3.1.jar:/hdd1/sm3rizvi/maven-repos/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar:/hdd1/sm3rizvi/maven-repos/org/codehaus/jettison/jettison/1.3.8/jettison-1.3.8.jar:/hdd1/sm3rizvi/maven-repos/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/hdd1/sm3rizvi/maven-repos/org/ops4j/pax/url/pax-url-aether/2.4.5/pax-url-aether-2.4.5.jar:/hdd1/sm3rizvi/maven-repos/org/slf4j/jcl-over-slf4j/1.6.6/jcl-over-slf4j-1.6.6.jar:/hdd1/sm3rizvi/maven-repos/org/agrona/agrona/1.0.0/agrona-1.0.0.jar:/hdd1/sm3rizvi/maven-repos/org/apache/curator/curator-framework/4.2.0/curator-framework-4.2.0.jar:/hdd1/sm3rizvi/maven-repos/org/apache/curator/curator-client/4.2.0/curator-client-4.2.0.jar:/hdd1/sm3rizvi/maven-repos/org/apache/zookeeper/zookeeper/3.5.4-beta/zookeeper-3.5.4-beta.jar:/hdd1/sm3rizvi/maven-repos/log4j/log4j/1.2.17/log4j-1.2.17.jar:/hdd1/sm3rizvi/maven-repos/org/apache/yetus/audience-annotations/0.5.0/audience-annotations-0.5.0.jar:/hdd1/sm3rizvi/maven-repos/io/netty/netty/3.10.6.Final/netty-3.10.6.Final.jar:/hdd1/sm3rizvi/maven-repos/com/amazonaws/aws-java-sdk-s3/1.11.553/aws-java-sdk-s3-1.11.553.jar:/hdd1/sm3rizvi/maven-repos/com/amazonaws/aws-java-sdk-kms/1.11.553/aws-java-sdk-kms-1.11.553.jar:/hdd1/sm3rizvi/maven-repos/com/amazonaws/aws-java-sdk-core/1.11.553/aws-java-sdk-core-1.11.553.jar:/hdd1/sm3rizvi/maven-repos/commons-logging/commons-logging/1.1.3/commons-logging-1.1.3.jar:/hdd1/sm3rizvi/maven-repos/software/amazon/ion/ion-java/1.0.2/ion-java-1.0.2.jar:/hdd1/sm3rizvi/maven-repos/com/fasterxml/jackson/core/jackson-databind/2.6.7.2/jackson-databind-2.6.7.2.jar:/hdd1/sm3rizvi/maven-repos/com/fasterxml/jackson/core/jackson-annotations/2.6.0/jackson-annotations-2.6.0.jar:/hdd1/sm3rizvi/maven-repos/com/fasterxml/jackson/core/jackson-core/2.6.7/jackson-core-2.6.7.jar:/hdd1/sm3rizvi/maven-repos/com/fasterxml/jackson/dataformat/jackson-dataformat-cbor/2.6.7/jackson-dataformat-cbor-2.6.7.jar:/hdd1/sm3rizvi/maven-repos/joda-time/joda-time/2.8.1/joda-time-2.8.1.jar:/hdd1/sm3rizvi/maven-repos/com/amazonaws/jmespath-java/1.11.553/jmespath-java-1.11.553.jar:/hdd1/sm3rizvi/maven-repos/javax/annotation/javax.annotation-api/1.2/javax.annotation-api-1.2.jar:/hdd1/sm3rizvi/maven-repos/org/apache/thrift/libthrift/0.12.0/libthrift-0.12.0.jar:/hdd1/sm3rizvi/maven-repos/org/apache/httpcomponents/httpclient/4.5.6/httpclient-4.5.6.jar:/hdd1/sm3rizvi/maven-repos/commons-codec/commons-codec/1.10/commons-codec-1.10.jar:/hdd1/sm3rizvi/maven-repos/org/apache/httpcomponents/httpcore/4.4.1/httpcore-4.4.1.jar kawkab.fs.cli.CLI
